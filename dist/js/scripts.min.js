function defaultJsonData(){return{integrantes:"",usuarios_mudaron:"",catidad_mudanza:"",mudados_siguen_participando:"",mudados_siguen_participando_donde:"",base_grupa:"",otras_zonas:""}}function yearJson(a){return yearData=defaultJsonData(),$("#"+a).prop("checked")&&(yearData.integrantes=$(".subForm__"+a).find("[name=integrantesGrupa]").val(),yearData.usuarios_mudaron=$(".subForm__"+a).find("[name=mudanzaGrupa]").val(),yearData.catidad_mudanza=$(".subForm__"+a).find("[name=cuantasMudanza]").val(),yearData.mudados_siguen_participando=$(".subForm__"+a).find("[name=sigue_participando]").val(),yearData.mudados_siguen_participando_donde=$(".subForm__"+a).find("[name=dondeGrupa]").val(),yearData.base_grupa=$(".subForm__"+a).find("[name=baseGrupa]").val(),yearData.otras_zonas=$(".subForm__"+a).find("[name=actuoGrupa]").val().join(", ")),yearData}function submitForm(){data={grupa:{nombre:$("#name").val(),provincia:$("#province option:selected").text(),years:[]}};for(let a=2012;a<2021;a++)year={year:a,data:yearJson(a)},data.grupa.years.push(year);jQuery.ajax({type:"POST",url:"https://encuesta-grupa.herokuapp.com/grupas",dataType:"json",contentType:"application/json",data:JSON.stringify(data),success:function(a){}})}$(".success__Box").hide(),$(".success__Message").hide(),$(".js-year").on("change",(function(){$year=$(this).val(),$(this).is(":checked")?($(".subForm__"+$year).show(),$("#mudanzaGrupa-"+$year).on("change",(function(){$(this).parents(".js-sub-form").find(".cuantasMudanza").toggle(),$(this).parents(".js-sub-form").find(".subForm__participa").toggle()})),$("#participaGrupa-"+$year).on("change",(function(){$(this).parents(".js-sub-form").find(".dondeGrupa").toggle()}))):$(".subForm__"+$year).hide()})),$(".js-province-list").on("change",(function(){if($province=$(".js-province-list").val(),""!=$province)$.get("https://apis.datos.gob.ar/georef/api/departamentos?max=900&provincia="+$province,(function(){})).done((function(a){$list=$(".js-municpios-list"),departamentos=[],$.each(a.departamentos,(function(){departamentos.push({id:this.id,nombre:this.nombre})})),departamentos.sort((function(a,e){return a.id>e.id?1:a.id<e.id?-1:0})),$list.empty(),$.each(departamentos,(function(){$list.append($("<option />").val(this.nombre).text(this.nombre))}))})).fail((function(){alert("error")}))})),$("form").on("submit",(function(a){data=submitForm(this),console.log(data),a.preventDefault(),$("form").empty(),$(".success__Box").show(),$(".success__Message").show()})),$("#form").trigger("reset");
//# sourceMappingURL=scripts.min.js.map